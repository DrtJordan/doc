/*! JD_1a - v0.55.0 - 2015-07-31
* Copyright (c) 2015 ;*/var k=this,l=function(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b},aa=function(a){var b=l(a);return"array"==b||"object"==b&&"number"==typeof a.length},m=function(a){return"string"==typeof a},n=function(a){return"function"==l(a)},ba=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},ca=Date.now||function(){return+new Date},p=function(a,b){var c=a.split("."),d=k;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b},q=function(a,b){function c(){}c.prototype=b.prototype,a.da=b.prototype,a.prototype=new c,a.ga=function(a,c,d){for(var e=Array(arguments.length-2),f=2;f<arguments.length;f++)e[f-2]=arguments[f];return b.prototype[c].apply(a,e)}};p("ddab.layouts.utils.VersionInfo.VERSION","4.0");var r=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};q(r,Error),r.prototype.name="CustomError";var da=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},ea=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ma=function(a){return fa.test(a)?(-1!=a.indexOf("&")&&(a=a.replace(ga,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(ha,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ia,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ja,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(ka,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(la,"&#0;")),a):a},ga=/&/g,ha=/</g,ia=/>/g,ja=/"/g,ka=/'/g,la=/\x00/g,fa=/[\x00&<>"']/,na=function(a){return Array.prototype.join.call(arguments,"")},oa=function(a,b){return b>a?-1:a>b?1:0},pa=function(a){return String(a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})},qa=function(a){var b=m(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()})},t=function(a,b){b.unshift(a),r.call(this,da.apply(null,b)),b.shift()};q(t,r),t.prototype.name="AssertionError";var u=function(a,b,c){if(!a){var d="Assertion failed";if(b)var d=d+(": "+b),e=Array.prototype.slice.call(arguments,2);throw new t(""+d,e||[])}},ra=function(a,b){throw new t("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))},v=Array.prototype,sa=v.indexOf?function(a,b,c){return u(null!=a.length),v.indexOf.call(a,b,c)}:function(a,b,c){if(c=null==c?0:0>c?Math.max(0,a.length+c):c,m(a))return m(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ta=v.forEach?function(a,b,c){u(null!=a.length),v.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;d>f;f++)f in e&&b.call(c,e[f],f,a)},ua=function(a){var b=a.length;if(b>0){for(var c=Array(b),d=0;b>d;d++)c[d]=a[d];return c}return[]},va=function(a,b){for(var c in a)b.call(void 0,a[c],c,a)},wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),xa=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<wa.length;f++)c=wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}},w=function(a,b){this.x=void 0!==a?a:0,this.y=void 0!==b?b:0};w.prototype.toString=function(){return"("+this.x+", "+this.y+")"},w.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},w.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this};var x=function(a,b){this.width=a,this.height=b};x.prototype.toString=function(){return"("+this.width+" x "+this.height+")"},x.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},x.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var y;a:{var ya=k.navigator;if(ya){var za=ya.userAgent;if(za){y=za;break a}}y=""}var z=function(){return-1!=y.indexOf("Edge")},Aa=-1!=y.indexOf("Opera")||-1!=y.indexOf("OPR"),A=-1!=y.indexOf("Edge")||-1!=y.indexOf("Trident")||-1!=y.indexOf("MSIE"),B=!(-1==y.indexOf("Gecko")||-1!=y.toLowerCase().indexOf("webkit")&&!z()||-1!=y.indexOf("Trident")||-1!=y.indexOf("MSIE")||z()),C=-1!=y.toLowerCase().indexOf("webkit")&&!z(),Ba=function(){var a=y;return B?/rv\:([^\);]+)(\)|;)/.exec(a):A&&z()?/Edge\/([\d\.]+)/.exec(a):A?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):C?/WebKit\/(\S+)/.exec(a):void 0},Ca=function(){var a=k.document;return a?a.documentMode:void 0},Da=function(){if(Aa&&k.opera){var a=k.opera.version;return n(a)?a():a}var a="",b=Ba();return b&&(a=b?b[1]:""),A&&!z()&&(b=Ca(),b>parseFloat(a))?String(b):a}(),Ea={},D=function(a){var b;if(!(b=Ea[a])){b=0;for(var c=ea(String(Da)).split("."),d=ea(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&e>f;f++){var g=c[f]||"",h=d[f]||"",i=RegExp("(\\d*)(\\D*)","g"),j=RegExp("(\\d*)(\\D*)","g");do{var k=i.exec(g)||["","",""],l=j.exec(h)||["","",""];if(0==k[0].length&&0==l[0].length)break;b=oa(0==k[1].length?0:parseInt(k[1],10),0==l[1].length?0:parseInt(l[1],10))||oa(0==k[2].length,0==l[2].length)||oa(k[2],l[2])}while(0==b)}b=Ea[a]=b>=0}return b},F=function(){return A&&(z()||Fa>=9)},Ga=k.document,Ha=Ca(),Fa=!Ga||!A||!Ha&&z()?void 0:Ha||("CSS1Compat"==Ga.compatMode?parseInt(Da,10):5),Ia=!A||F();!B&&!A||A&&F()||B&&D("1.9.1");var Ja=A&&!D("9"),La=function(a,b){va(b,function(b,c){"style"==c?a.style.cssText=b:"class"==c?a.className=b:"for"==c?a.htmlFor=b:c in Ka?a.setAttribute(Ka[c],b):0==c.lastIndexOf("aria-",0)||0==c.lastIndexOf("data-",0)?a.setAttribute(c,b):a[c]=b})},Ka={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Na=function(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!Ia&&g&&(g.name||g.type)){if(f=["<",f],g.name&&f.push(' name="',ma(g.name),'"'),g.type){f.push(' type="',ma(g.type),'"');var h={};xa(h,g),delete h.type,g=h}f.push(">"),f=f.join("")}return f=e.createElement(f),g&&(m(g)?f.className=g:"array"==l(g)?f.className=g.join(" "):La(f,g)),2<d.length&&Ma(e,f,d),f},Ma=function(a,b,c){function d(c){c&&b.appendChild(m(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];if(!aa(f)||ba(f)&&0<f.nodeType)d(f);else{var g;a:{if(f&&"number"==typeof f.length){if(ba(f)){g="function"==typeof f.item||"string"==typeof f.item;break a}if(n(f)){g="function"==typeof f.item;break a}}g=!1}ta(g?ua(f):f,d)}}},Oa=function(a){for(var b;b=a.firstChild;)a.removeChild(b)},Pa=function(a){return u(a,"Node cannot be null or undefined."),9==a.nodeType?a:a.ownerDocument||a.document},Qa={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ra={IMG:" ",BR:"\n"},Ta=function(a){if(Ja&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Sa(a,b,!0),a=b.join("")}return a=a.replace(/ \xAD /g," ").replace(/\xAD/g,""),a=a.replace(/\u200B/g,""),Ja||(a=a.replace(/ +/g," "))," "!=a&&(a=a.replace(/^\s*/,"")),a},Sa=function(a,b,c){if(!(a.nodeName in Qa))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Ra)b.push(Ra[a.nodeName]);else for(a=a.firstChild;a;)Sa(a,b,c),a=a.nextSibling},Ua=function(a){return Ua[" "](a),a};Ua[" "]=function(){};var Va=!A||F(),Wa=A&&!D("9");!C||D("528"),B&&D("1.9b")||A&&D("8")||Aa&&D("9.5")||C&&D("528"),B&&!D("8")||A&&D("9");var Xa=function(){this.D=this.D,this.$=this.$};Xa.prototype.D=!1;var G=function(a,b){this.type=a,this.currentTarget=this.target=b,this.defaultPrevented=this.g=!1,this.M=!0};G.prototype.preventDefault=function(){this.defaultPrevented=!0,this.M=!1};var H=function(a,b){if(G.call(this,a?a.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.F=this.state=null,a){var c=this.type=a.type;this.target=a.target||a.srcElement,this.currentTarget=b;var d=a.relatedTarget;if(d){if(B){var e;a:{try{Ua(d.nodeName),e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d,this.offsetX=C||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=C||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0,this.button=a.button,this.keyCode=a.keyCode||0,this.charCode=a.charCode||("keypress"==c?a.keyCode:0),this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.state=a.state,this.F=a,a.defaultPrevented&&this.preventDefault()}};q(H,G),H.prototype.preventDefault=function(){H.da.preventDefault.call(this);var a=this.F;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Wa)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}};var I="closure_listenable_"+(1e6*Math.random()|0),Ya=0,Za=function(a,b,c,d,e){this.e=a,this.r=null,this.src=b,this.type=c,this.o=!!d,this.p=e,this.key=++Ya,this.h=this.n=!1},$a=function(a){a.h=!0,a.e=null,a.r=null,a.src=null,a.p=null},J=function(a){this.src=a,this.c={},this.s=0};J.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.c[f],a||(a=this.c[f]=[],this.s++);var g=ab(a,b,d,e);return g>-1?(b=a[g],c||(b.n=!1)):(b=new Za(b,this.src,f,!!d,e),b.n=c,a.push(b)),b},J.prototype.remove=function(a,b,c,d){if(a=a.toString(),!(a in this.c))return!1;var e=this.c[a];return b=ab(e,b,c,d),b>-1?($a(e[b]),u(null!=e.length),v.splice.call(e,b,1),0==e.length&&(delete this.c[a],this.s--),!0):!1};var bb=function(a,b){var c=b.type;if(c in a.c){var d,e=a.c[c],f=sa(e,b);(d=f>=0)&&(u(null!=e.length),v.splice.call(e,f,1)),d&&($a(b),0==a.c[c].length&&(delete a.c[c],a.s--))}};J.prototype.u=function(a,b,c,d){a=this.c[a.toString()];var e=-1;return a&&(e=ab(a,b,c,d)),e>-1?a[e]:null};var ab=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.h&&f.e==b&&f.o==!!c&&f.p==d)return e}return-1},cb="closure_lm_"+(1e6*Math.random()|0),db={},eb=0,K=function(a,b,c,d,e){if("array"==l(b))for(var f=0;f<b.length;f++)K(a,b[f],c,d,e);else if(c=fb(c),a&&a[I])f=c,gb(a),a.d.add(String(b),f,!1,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=L(a);g||(a[cb]=g=new J(a)),d=g.add(b,c,!1,d,e),d.r||(e=hb(),d.r=e,e.src=a,e.e=d,a.addEventListener?a.addEventListener(b.toString(),e,f):a.attachEvent(ib(b.toString()),e),eb++)}},hb=function(){var a=jb,b=Va?function(c){return a.call(b.src,b.e,c)}:function(c){return c=a.call(b.src,b.e,c),c?void 0:c};return b},kb=function(a,b,c,d,e){if("array"==l(b))for(var f=0;f<b.length;f++)kb(a,b[f],c,d,e);else c=fb(c),a&&a[I]?a.d.remove(String(b),c,d,e):a&&(a=L(a))&&(b=a.u(b,c,!!d,e))&&lb(b)},lb=function(a){if("number"!=typeof a&&a&&!a.h){var b=a.src;if(b&&b[I])bb(b.d,a);else{var c=a.type,d=a.r;b.removeEventListener?b.removeEventListener(c,d,a.o):b.detachEvent&&b.detachEvent(ib(c),d),eb--,(c=L(b))?(bb(c,a),0==c.s&&(c.src=null,b[cb]=null)):$a(a)}}},ib=function(a){return a in db?db[a]:db[a]="on"+a},nb=function(a,b,c,d){var e=!0;if((a=L(a))&&(b=a.c[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.o==c&&!f.h&&(f=mb(f,d),e=e&&!1!==f)}return e},mb=function(a,b){var c=a.e,d=a.p||a.src;return a.n&&lb(a),c.call(d,b)},ob=function(a,b){u(!(!a||!a[I]),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),a.dispatchEvent(b)},jb=function(a,b){if(a.h)return!0;if(!Va){var c;if(!(c=b))a:{c=["window","event"];for(var d,e=k;d=c.shift();){if(null==e[d]){c=null;break a}e=e[d]}c=e}if(d=c,c=new H(d,this),e=!0,!(0>d.keyCode||void 0!=d.returnValue)){a:{var f=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){f=!0}(f||void 0==d.returnValue)&&(d.returnValue=!0)}for(d=[],f=c.currentTarget;f;f=f.parentNode)d.push(f);for(var f=a.type,h=d.length-1;!c.g&&h>=0;h--){c.currentTarget=d[h];var i=nb(d[h],f,!0,c),e=e&&i}for(h=0;!c.g&&h<d.length;h++)c.currentTarget=d[h],i=nb(d[h],f,!1,c),e=e&&i}return e}return mb(a,new H(b,this))},L=function(a){return a=a[cb],a instanceof J?a:null},pb="__closure_events_fn_"+(1e9*Math.random()>>>0),fb=function(a){return u(a,"Listener can not be null."),n(a)?a:(u(a.handleEvent,"An object listener must have handleEvent method."),a[pb]||(a[pb]=function(b){return a.handleEvent(b)}),a[pb])},M=function(){Xa.call(this),this.d=new J(this),this.O=this,this.K=null};q(M,Xa),M.prototype[I]=!0,M.prototype.addEventListener=function(a,b,c,d){K(this,a,b,c,d)},M.prototype.removeEventListener=function(a,b,c,d){kb(this,a,b,c,d)},M.prototype.dispatchEvent=function(a){gb(this);var b,c=this.K;if(c){b=[];for(var d=1;c;c=c.K)b.push(c),u(1e3>++d,"infinite loop")}if(c=this.O,d=a.type||a,m(a))a=new G(a,c);else if(a instanceof G)a.target=a.target||c;else{var e=a;a=new G(d,c),xa(a,e)}var f,e=!0;if(b)for(var g=b.length-1;!a.g&&g>=0;g--)f=a.currentTarget=b[g],e=P(f,d,!0,a)&&e;if(a.g||(f=a.currentTarget=c,e=P(f,d,!0,a)&&e,a.g||(e=P(f,d,!1,a)&&e)),b)for(g=0;!a.g&&g<b.length;g++)f=a.currentTarget=b[g],e=P(f,d,!1,a)&&e;return e};var P=function(a,b,c,d){if(b=a.d.c[String(b)],!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.h&&g.o==c){var h=g.e,i=g.p||g.src;g.n&&bb(a.d,g),e=!1!==h.call(i,d)&&e}}return e&&0!=d.M};M.prototype.u=function(a,b,c,d){return this.d.u(String(a),b,c,d)};var gb=function(a){u(a.d,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},Q=function(a,b,c,d){this.top=a,this.right=b,this.bottom=c,this.left=d};Q.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Q.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Q.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var R=function(a,b,c){if(m(b))(b=qb(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=qb(c,d);f&&(c.style[f]=e)}},rb={},qb=function(a,b){var c=rb[b];if(!c){var d=pa(b),c=d;void 0===a.style[d]&&(d=(C?"Webkit":B?"Moz":A?"ms":Aa?"O":null)+qa(d),void 0!==a.style[d]&&(c=d)),rb[b]=c}return c},S=function(a,b){var c=Pa(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""},sb=function(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,a.style.left=b;var e=a.style.pixelLeft;return a.style.left=c,a.runtimeStyle.left=d,e},T=function(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?sb(a,c):0},U=function(a,b){if(A){var c=T(a,b+"Left"),d=T(a,b+"Right"),e=T(a,b+"Top"),f=T(a,b+"Bottom");return new Q(e,d,f,c)}return c=S(a,b+"Left"),d=S(a,b+"Right"),e=S(a,b+"Top"),f=S(a,b+"Bottom"),new Q(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(c))},tb={thin:2,medium:4,thick:6},ub=function(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in tb?tb[c]:sb(a,c)},vb=function(a){if(A&&!F()){var b=ub(a,"borderLeft"),c=ub(a,"borderRight"),d=ub(a,"borderTop");return a=ub(a,"borderBottom"),new Q(d,c,a,b)}return b=S(a,"borderLeftWidth"),c=S(a,"borderRightWidth"),d=S(a,"borderTopWidth"),a=S(a,"borderBottomWidth"),new Q(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))},V=function(a,b,c,d){M.call(this),this.l=a,this.U=b,this.ba=c,this.P=d,this.b=null,this.I=new x(0,0),R(this.l,"overflow","hidden"),this.b=document.createElement("img"),this.b.src=this.U,R(this.b,"position","inherit"),K(this.b,"load",this.V,!1,this),K(this.b,"error",this.T,!1,this)};q(V,M),p("ddab.layouts.utils.DynamicImageFit",V),V.addEventListener=V.prototype.addEventListener,V.removeEventListener=V.prototype.removeEventListener,V.prototype.R=function(){return this.b},V.prototype.getImage=V.prototype.R,V.prototype.V=function(){this.I=new x(this.b.width,this.b.height);var a,b=new x(this.l.clientWidth,this.l.clientHeight),c=this.I;if(a=this.ba,"none"==a||"shrink_to_fit"==a&&c.width<=b.width&&c.height<=b.height)a=c;else{var c=c.width/c.height,d=b.width/b.height;a="fit"==a&&c>d||"fill"==a&&d>c||"shrink_to_fit"==a&&c>d?new x(Math.floor(b.width),Math.floor(b.width/c)):new x(Math.floor(b.height*c),Math.floor(b.height))}var c=a,d=this.P,e=new w((b.width-c.width)/2,(b.height-c.height)/2);"center"!=d&&(("top"==d||"top_left"==d||"top_right"==d)&&(e.y=0),("bottom"==d||"bottom_left"==d||"bottom_right"==d)&&(e.y=b.height-c.height),("left"==d||"top_left"==d||"bottom_left"==d)&&(e.x=0),("right"==d||"top_right"==d||"bottom_right"==d)&&(e.x=b.width-c.width)),this.b.width=a.width,this.b.height=a.height,R(this.b,"left",e.x+"px"),R(this.b,"top",e.y+"px"),Oa(this.l),this.l.appendChild(this.b),ob(this,"image_load")},V.prototype.T=function(){this.b.width=0,this.b.height=0,ob(this,"image_load_error")};var wb=function(a,b,c,d,e){this.reset(a,b,c,d,e)};wb.prototype.G=null;var xb=0;wb.prototype.reset=function(a,b,c,d,e){"number"==typeof e||xb++,d||ca(),this.j=a,this.Y=b,delete this.G},wb.prototype.N=function(a){this.j=a};var W=function(a){this.Z=a,this.H=this.t=this.j=this.q=null},yb=function(a,b){this.name=a,this.value=b};yb.prototype.toString=function(){return this.name};var zb=new yb("INFO",800),Ab=new yb("CONFIG",700);W.prototype.getParent=function(){return this.q},W.prototype.N=function(a){this.j=a};var Cb=function(a){return a.j?a.j:a.q?Cb(a.q):(ra("Root logger has no level set."),null)};W.prototype.log=function(a,b,c){if(a.value>=Cb(this).value)for(n(b)&&(b=b()),a=new wb(a,String(b),this.Z),c&&(a.G=c),c="log:"+a.Y,k.console&&(k.console.timeStamp?k.console.timeStamp(c):k.console.markTimeline&&k.console.markTimeline(c)),k.msWriteProfilerMark&&k.msWriteProfilerMark(c),c=this;c;){b=c;var d=a;if(b.H)for(var e=0,f=void 0;f=b.H[e];e++)f(d);c=c.getParent()}},W.prototype.info=function(a,b){this.log(zb,a,b)};var Db={},Eb=null,Fb=function(a){Eb||(Eb=new W(""),Db[""]=Eb,Eb.N(Ab));var b;if(!(b=Db[a])){b=new W(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Fb(a.substr(0,c));c.t||(c.t={}),c.t[d]=b,b.q=c,Db[a]=b}return b};p("ddab.layouts.utils.simpleUnicode.CharacterSet",{fa:"cjk"});var Hb=function(a,b){var c;switch(b){case"cjk":c=Gb}return c?c.test(a):!1};p("ddab.layouts.utils.simpleUnicode.matchesCharacterSet",Hb);for(var Ib=[/\u3000-\u303f/,/\u3040-\u309f/,/\u30a0-\u30ff/,/\uff00-\uffef/,/\u4e00-\u9fff/,/\u3400-\u4dff/,/\uf900-\ufaff/,/\uac00-\ud7a3/],Jb="",Kb=0,Lb=Ib.length;Lb>Kb;Kb++)Jb+=Ib[Kb].source;var Gb=new RegExp("["+Jb+"]");p("ddab.layouts.utils.simpleUnicode.CJK_REGEXP",Gb);var X=function(a,b,c,d){M.call(this),this.a=a,this.J=!1,this.k=b,a=this.a,b=U(a,"padding");var e=vb(a),f=a.style.maxWidth,f=(f?parseInt(f,10):a.getBoundingClientRect().width)-e.left-b.left-b.right-e.right;a=a.getBoundingClientRect().height-e.top-b.top-b.bottom-e.bottom,a=new x(f,a),this.w=a.width,this.v=a.height,this.B=0,this.C=c,this.ea=d,this.X=Fb("ddab.layouts.utils.DynamicTextFit"),this.f=0,c=parseInt(S(this.a,"fontSize"),10),R(this.a,"overflow","hidden"),(isNaN(c)||c<this.k)&&R(this.a,"font-size",this.k+"px"),this.C||R(this.a,"white-space","nowrap")};q(X,M),p("ddab.layouts.utils.DynamicTextFit",X),X.addEventListener=X.prototype.addEventListener,X.removeEventListener=X.prototype.removeEventListener;var Mb=/\s+/,Nb={display:"block",margin:0,overflow:"hidden",padding:0,position:"absolute",visibility:"hidden"},Y={m:"horizontal",i:"vertical"};X.prototype.aa=function(){var a=Math.round(parseFloat(S(this.a,"fontSize"))),b=Ta(this.a).trim().split(Mb);if(1!=b.length||!/^[\s\xa0]*$/.test(b[0])){if(a=Ob(this,b,a,"vertical"),this.B=a=Ob(this,b,a,"horizontal"),this.ea){var c=this.B,d=b;if(!(c!=this.k||Z(this,d,c,Y.i)&&Z(this,d,c,Y.m))){var d=Pb(this,d,c,Y.i),d=Pb(this,d,c,Y.m),a=d.join(" "),e=Z(this,d,c,Y.m,!0),d=Z(this,d,c,Y.m,!1),a=1!=b.length||e?a+"…":d?a.slice(0,-4)+"…":Qb(this,a,c),b=this.a;if(u(null!=b,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in b)b.textContent=a;else if(3==b.nodeType)b.data=a;else if(b.firstChild&&3==b.firstChild.nodeType){for(;b.lastChild!=b.firstChild;)b.removeChild(b.lastChild);b.firstChild.data=a}else Oa(b),c=Pa(b),b.appendChild(c.createTextNode(String(a)));this.J=!0}}ob(this,"textfit")}},X.prototype.scaleText=X.prototype.aa,X.prototype.ca=function(a,b){var c=Ta(this.a);Hb(c,b)&&(this.k=a)},X.prototype.setAlternateMinFontSize=X.prototype.ca,X.prototype.S=function(){return this.B},X.prototype.getScaledFontSize=X.prototype.S,X.prototype.Q=function(){return this.f},X.prototype.getCycleCount=X.prototype.Q,X.prototype.W=function(){return this.J},X.prototype.isTruncated=X.prototype.W;var Z=function(a,b,c,d,e){e=Na("div",null,b.join(" ")+(e?"…":"")),a.a.appendChild(e),b=b.length;var f=S(a.a,"lineHeight"),g={},g="vertical"==d?{fontSize:c+"px",lineHeight:/^[\s\xa0]*$/.test(f)?"normal":f,maxWidth:Math.floor(a.w)+"px"}:{fontSize:c+"px",height:a.v+"px",lineHeight:"normal"!=f?f:c+"px",maxWidth:Math.floor(a.w)+"px",overflow:"auto",whiteSpace:a.C&&b>1?"normal":"nowrap"};return xa(g,Nb),R(e,g),c=e.getBoundingClientRect(),a="vertical"==d?Number(a.v.toFixed(4))>=Number(c.height.toFixed(4)):e.scrollWidth<=a.w,e&&e.parentNode&&e.parentNode.removeChild(e),a},Ob=function(a,b,c,d){for(;!Z(a,b,c,d)&&c>a.k;)c--,R(a.a,"font-size",c+"px");return c},Rb=function(a,b){S(a.a,"line-height");var c=Math.floor(a.v/b);return isNaN(c)?-1:c},Sb=function(a){R(a.a,{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"})},Qb=function(a,b,c){if(!a.C)return Sb(a),b;R(a.a,"word-wrap","break-word");var d;a.f=0;for(var e=b,f=6;!Z(a,[b],c,Y.i,!0)&&f>0;){if(2>Rb(a,c))return Sb(a),b;d=parseInt(.8*b.length,10),d={A:b.substring(0,d),L:b.substring(d,b.length)},b=d.A,f--,a.f++}for(f=16;!Z(a,[b],c,Y.i,!0);){if(2>Rb(a,c)||0==f)return Sb(a),b;6<b.length?(d=b.length-6,d={A:b.substring(0,d),L:b.substring(d,b.length)},b=d.A):b=b.substring(0,b.length-1),f--,a.f++}if(f=0,d){for(;Z(a,[b],c,Y.i,!0);)b+=d.L.substr(f,1),f++,a.f++;b=b.substring(0,b.length-1),b+="…",a.X.info(na("chars started with ",e.length," ended with ",b.length," removed ",e.length-b.length," chars in ",a.f," iterations"))}return b},Pb=function(a,b,c,d){for(;1<b.length&&!Z(a,b,c,d,!0);)b.pop();return b};p("ddab.layouts.utils.styleUtils.getPaddingBox",function(a){return U(a,"padding")}),p("ddab.layouts.utils.styleUtils.getMarginBox",function(a){return U(a,"margin")});var Tb=function(a){var b=U(a,"padding");return a=vb(a),new Q(b.top+a.top,b.right+a.right,b.bottom+a.bottom,b.left+a.left)};p("ddab.layouts.utils.styleUtils.getPaddingBorderBox",Tb),p("ddab.layouts.utils.styleUtils.getBoundingClientRectContentSize",function(a){var b=a.getBoundingClientRect(),c=0,d=0;return b&&(a=Tb(a),c=b.right-b.left-a.right-a.left,d=b.bottom-b.top-a.bottom-a.top),new x(c,d)});var TypeConvert=function(){function a(a){if(""==this)return null;a=b(a);var c,d,e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),f=parseInt(e[1],16)/255,g=parseInt(e[2],16)/255,h=parseInt(e[3],16)/255,i=Math.max(f,g,h),j=Math.min(f,g,h),k=(i+j)/2;if(i===j)c=d=0;else{var l=i-j;switch(d=k>.5?l/(2-i-j):l/(i+j),i){case f:c=(g-h)/l+(h>g?6:0);break;case g:c=(h-f)/l+2;break;case h:c=(f-g)/l+4}c/=6}return{h:Math.floor(360*c),s:Math.floor(100*d),l:Math.floor(100*k)}}function b(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return a.replace(b,function(a,b,c){return a+a+b+b+c+c})}return{toHSL:a,getFullHEXColor:b}}();String.prototype.toBoolean=function(){return"true"==this.toLowerCase()},String.prototype.toNumber=function(){return Number(this)},String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})},String.prototype.toColor=function(){var a=this;if(""===this)return null;if(-1!=this.indexOf("#")){var b=this.replace(/#/g,"0x");a=b}return"#"+a.split("0x").join("")},String.prototype.hexToRGBA=function(a){if(a="undefined"!=typeof a?a:1,""===this)return null;var b=TypeConvert.getFullHEXColor(this.toColor()),c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return c?"rgba("+parseInt(c[1],16)+","+parseInt(c[2],16)+","+parseInt(c[3],16)+","+a+")":null},String.prototype.changeBrightness=function(a){if(""==this)return null;for(var b,c=TypeConvert.getFullHEXColor(this.toColor()),d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c),e="",f=1;f<d.length;f++)b=parseInt(d[f],16),b+=b*a,e+=Math.round(Math.min(Math.max(0,b),255)),3!==f&&(e+=",");return e?"rgb("+e+")":null},String.prototype.changeHue=function(a){if(a=a||0,""==this)return null;var b=TypeConvert.toHSL(this.toColor());return b.h=Math.round(Math.min(Math.max(0,b.h+parseInt(a)),360)),"hsl("+b.h+", "+b.s+"%, "+b.l+"%)"},String.prototype.changeSaturationAndLightness=function(a,b){if(a=a||0,b=b||0,""==this)return null;var c=TypeConvert.toHSL(this.toColor());return c.s=Math.round(Math.min(Math.max(0,c.s+parseInt(a)),100)),c.l=Math.round(Math.min(Math.max(0,c.l+parseInt(b)),100)),"hsl("+c.h+", "+c.s+"%, "+c.l+"%)"},window.onAdData=function(a,b){layout.constant("DynamicData",a),layout.constant("ExitApi",b),angular.bootstrap(document,["layout"])};var DirectiveUtils=function(){function a(a,b){var c="logElementDetails: ";b&&(c+=b),c+=" "+a.className+": w = "+a.offsetWidth+",h = "+a.offsetHeight,c+="\n"+a.innerHTML}function b(a,b){var c=a.text(),d=document.createElement(b),d=angular.element(d);return d.text(c),a.html(""),!a.attr("multiline").toBoolean()&&a.attr("truncate").toBoolean()&&d.css({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),a.append(d),d}function c(a){var b=a.attr("valign");a.attr("multiline");if(b){var c=a[0].clientHeight+"px";a.addClass("inline-wrapper"),a.css({display:"table-cell","vertical-align":b,height:c})}}function d(a){a.css({overflow:"visible"})}return{logElementDetails:a,wrapText:b,showOverflow:d,vAlign:c}}();layout.directive("textFit",["$timeout","$rootScope",function(a,b){return{restrict:"AE",link:function(c,d,e){function f(){var a=d.text().trim(),c=new ddab.layouts.utils.DynamicTextFit(d[0],g&&g.toNumber(),h&&h.toBoolean(),i&&i.toBoolean()),e="undefined"!=typeof c.scaleText;e&&(c.addEventListener("textfit",function(e){var f=c.isTruncated(),g=c.getScaledFontSize(),h={el:d,isTruncated:f,scaledFontSize:g,doUniformSize:j,group:k};b.$emit(b.TEXTFIT_COMPLETE,h),f&&!d[0].hasAttribute("title")&&d[0].setAttribute("title",a)}),c.scaleText()),h&&h.toBoolean()||DirectiveUtils.vAlign(d)}var g=e.minfontsize,h=e.multiline,i=e.truncate,j=e.uniformsize&&e.uniformsize.toBoolean(),k=e.group||"default",l=!1;a(function(){j&&(b.$emit(b.TEXTFIT_UNIFORMSIZE_ADDED,d,k),b.$on(b.TEXTFIT_UNIFORMSIZE_COMPLETE,function(a,b,c){l||c&&c.group==k&&(d.css("font-size",b+"px"),l=!0)})),c.preloaded?f():b.$on(b.PRELOADED,function(){f()})})}}}]),layout.directive("imageFit",["$timeout",function(a){return{restrict:"AE",scope:{scaletype:"@",aligntype:"@",loc:"@"},link:function(b,c,d){a(function(){new ddab.layouts.utils.DynamicImageFit(c[0],b.loc,b.scaletype,b.aligntype)})}}}]),layout.directive("dynamicStyle",["$timeout","$rootScope",function(a,b){return{restrict:"AE",link:function(c,d,e){a(function(){d.parent().append("<style>"+d.text()+"</style>"),d.text(""),b.$broadcast(b.STYLES_LOADED)})}}}]),layout.directive("noExit",function(){return{restrict:"AE",link:function(a,b,c){b.bind("click",function(a){a.stopPropagation(),a.preventDefault()})}}}),layout.directive("itemInteraction",["$rootScope",function(a){return{restrict:"AE",link:function(b,c,d){var e="itemInteraction";c.bind("mouseenter",function(){var c=b.$eval(d.itemInteraction);a.$broadcast(e+".update",c),b.$apply()}).bind("mouseleave",function(){a.$broadcast(e+".revert"),b.$apply()})}}}]),layout.service("DataHandler",["DynamicData",function(a){function b(){return a}function c(){return{products:d("Product"),headline:d("Headline")[0],design:d("Design")[0]}}function d(b){var c=a.google_template_data.adData[0],d=[];for(var e in c)if(c.hasOwnProperty(e)){var f=0===e.indexOf(b);if(f){var g=c[e],h=e.split("_"),i=h[1],j=h[2];d[i]=d[i]||{},d[i][j]=g}}return d}function e(a){if(a&&0!=a.length)for(var b=0;b<a.length;b++)a[b].index=b}function f(a,b){for(var c=a.length;c--&&c>b-1;)a.splice(c,1)}function g(b){var c="undefined"!=typeof b?b:h();return a.google_click_url+encodeURIComponent(c)}function h(){return a.destination_url}function i(a){return isNaN(a)?j():"Product_"+a+"_url"}function j(){return""}function k(){return a.link_target||"_top"}return{getDynamicData:b,getParsedAdData:c,cleanFeedItems:e,limitFeedItems:f,getExitUrl:g,getItemExitApiRef:i,getDefaultExitApiRef:j,getExitTarget:k}}]),layout.service("Utils",["$timeout",function(a){function b(b){var c=28e3,d=b.limit&&b.limit<c?b.limit:c,e=b.delay||1e3,f=Math.floor((d-e)/e),g=b.enableAutoCycleStop!==!1,h=0;!function i(){if(g!==!0||n!==!0){if(h>=f)return void(b.onFinish&&b.onFinish());b.interval&&h>0&&h%b.interval==0&&b.onInterval&&b.onInterval(),h>0&&b.onTick(),h++,a(i,e)}}()}function c(){n=!0}function d(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,h=255&c;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-h)*e)+h)).toString(16).slice(1)}function e(a){if(a){var b=/(\.|\,)0{2}(?![\d])/;return a.replace(b,"")}}function f(a){var b=/[^0-9.,]/g,c=/,/g;return a=a.replace(b,""),a=a.replace(c,".")}function g(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];d.salePercentDiscount&&d.salePercentDiscount>0&&(d.formattedDiscount=h(d))}}function h(a){var b=a.salePercentDiscount;if(!b)return null;var c="-";return c+=parseInt(100*Number(b)),c+="%"}function i(a,b){function c(a){return a&&-1!=a.indexOf("　")&&(a=a.replace(/　/g," ")),a}for(var d=0;d<b.length;d++){var e=b[d];a[e]&&(a[e]=c(a[e]))}}function j(a){var b=a.salePrice&&a.regularPrice&&""!=a.salePrice.trim()&&""!=a.regularPrice.trim()&&a.salePrice!=a.regularPrice;return b}function k(a){var b=a.salePrice&&""!=a.salePrice.trim()&&""!=a.price.trim()&&a.salePrice!=a.price;return b}function l(a){if(null==a.price)return null;var b=a.price;return a.salePrice&&""!=a.salePrice.trim()&&a.salePrice!=b&&(b=a.salePrice),b}function m(a,b){var c=a/b;return 1!=c&&c===parseInt(c)}var n=!1;return{shadeColor:d,autoCycle:b,autoCycleStop:c,removeCents:e,convertToNumber:f,setPriceDiscounts:g,salesPriceEnabled:j,salesPriceEnabledNonRetail:k,lowestPriceNonRetail:l,convertJapaneseFullspaceToHalfspace:i,isDivisibleAsInt:m}}]),layout.service("VisibleItemsSwitcher",function(){function a(a){m=a,n=m.length}function b(a){l=a}function c(){for(var a=n/l;a>1&&a!=parseInt(a);)m.pop(),n=m.length,a=n/l}function d(a){var b=f();o=[],p=e(a);for(var c=0;c<p.length;c++){var a=p[c],d=m[a];g(b,d)&&(d=angular.copy(d)),o.push(d)}return o}function e(a){for(var b=[],c=0,d=n>l?l:n,e=0;d>e;e++)r=a+c,r>=n&&(r=a=c=0),b.push(r),c++;return b}function f(){if(!o)return null;for(var a=[],b=0;b<o.length;b++)a.push(o[b].$$hashKey);return a}function g(a,b){if(!a)return!1;for(var c=b.$$hashKey,d=0;d<a.length;d++)if(a[d]==c)return!0;return!1}function h(a){d(i(a))}function i(a){return a>0?q=r+1:1>a&&(q-=l,0>q&&(q=n+q)),q}function j(){return o}function k(){return p}var l,m,n,o,p,q=0,r=0;return{setItemsArray:a,setVisibleItemsLength:b,
removeRemainderItems:c,updateVisibleItemsByDirection:h,getVisibleItemsIndexByDirection:i,updateVisibleItemsByIndex:d,getVisibleItemsIndices:k,getVisibleItems:j}}),layout.service("VisibleItemsNavMenu",[function(){var a=this;a.navMenuButtons=[],this.setNavMenuButtons=function(a,b){for(var c=Math.ceil(b/a),d=Math.ceil(b/c),e=0,f=c;f>e;e++)this.navMenuButtons.push({number:e+1,index:e*d,span:d})},this.getNavMenuButtonByIndex=function(b){for(var c=0,d=a.navMenuButtons.length;d>c;c++)if(a.navMenuButtons[c].index=b)return a.navMenuButtons}}]),layout.service("AnimSequence",["$timeout","$rootScope",function(a,b){function c(){j===!0||h>k||(h>0&&d(h),h++,a(c,i))}function d(a){b.$broadcast("AnimSequence.update",a)}function e(){c()}function f(){j=!0}function g(a){i=a}var h=0,i=100,j=!1,k=20;return{finish:f,start:e,setDelay:g}}]),layout.service("StarRatings",[function(){function a(a,b){return b||(b=d),a[b]&&a[b]>=3}function b(a,b){if(b||(b=d),a[b]){for(var e=c(parseFloat(a[b])),f=e!==parseInt(e),g=[],h=0;5>h;h++)h<=Math.floor(e)-1?g.push("full"):h==Math.ceil(e)-1?f===!0&&g.push("half"):g.push("empty");a.stars=g}}function c(a){return a=Math.round(2*a)/2}var d="rating";return{addStars:b,isStarsShown:a}}]),layout.controller("LayoutCntrl",["$scope","$rootScope","$timeout","$sce","DataHandler","Utils","ExitApi",function(a,b,c,d,e,f,g){function h(){return a.fontsLoaded?a.enableDynamicStyles?void(a.stylesLoaded&&i()):void i():void 0}function i(){m||(m=!0,c(function(){a.preloaded=!0,b.$broadcast(b.PRELOADED)},300),c(function(){a.showLayout=!0,b.$broadcast("start")},1e3))}function j(){var b=a.headline&&a.headline.productClickOnly&&a.headline.productClickOnly.toBoolean()===!0;if(n||b){var c=a.getVisibleItems()[a.exitItemIndex];c||(c=a.getVisibleItems()[0]),a.exitUrl=c&&c.url?e.getExitUrl(c.url):e.getExitUrl(),a.exitApiRef=c&&void 0!=c.index?e.getItemExitApiRef(c.index):e.getExitUrl()}else a.exitUrl=e.getExitUrl(),a.exitApiRef=e.getDefaultExitApiRef()}function k(a){for(var b,c=0;c<a.sizes.length;c++)(!b||a.sizes[c]<b)&&(b=a.sizes[c]);return b}function l(a,c){c?b.$emit(b.TEXTFIT_UNIFORMSIZE_COMPLETE,a,c):b.$emit(b.TEXTFIT_UNIFORMSIZE_COMPLETE),clearTimeout(o)}!function(){var b=e.getParsedAdData();a.products=b.products,a.headline=b.headline,a.design=b.design,e.cleanFeedItems(a.products),c(function(){a.itemsLimit&&e.limitFeedItems(a.products,a.itemsLimit)}),f.setPriceDiscounts(a.products)}(),a.preloaded=!1,a.stylesLoaded=!1,a.fontsLoaded=!1,a.enableDynamicStyles=!1,b.FONTS_LOADED="fontsLoaded",b.FONTS_UNUSED="fontsUnused",b.STYLES_LOADED="stylesLoaded",b.PRELOADED="preloaded",b.$on(b.FONTS_LOADED,function(){a.webFonts,a.fontsLoaded=!0,h()}),b.$on(b.FONTS_UNUSED,function(){a.webFonts,a.fontsLoaded=!0,h()}),b.$on(b.STYLES_READY,function(){a.stylesLoaded=!0,h()});var m=!1;c(function(){"undefined"==typeof WebFont?b.$broadcast(b.FONTS_UNUSED):c(function(){if(!a.webFonts)throw new Error("webfont.js used, $scope.webFonts undefined");WebFont.load({google:{families:a.webFonts},timeout:2e3,active:function(){b.$broadcast(b.FONTS_LOADED)},inactive:function(){b.$broadcast(b.FONTS_UNUSED)}})})}),a.setVisibleItems=function(b){a.visibleItems=b,a.resetUniformTextSizes()},a.getVisibleItems=function(){var b=a.products;return a.visibleItems&&a.visibleItems.length>0&&(b=a.visibleItems),b},a.setCurrentItemIndex=function(b){a.currentItemIndex=b,a.exitItemIndex=b,a.currentItem=a.getVisibleItems()[b],j()},a.setCurrentItemIndex(0),a.isCurrentItemIndex=function(b){return a.currentItemIndex==b},a.isCurrentItem=function(b){var c=a.products[b];return a.currentItem.index==c.index?!0:!1},a.setItemPrevious=function(){var b=a.currentItemIndex>0?a.currentItemIndex-1:a.getVisibleItems().length-1;a.setCurrentItemIndex(b)},a.setItemNext=function(){var b=a.currentItemIndex<a.getVisibleItems().length-1?a.currentItemIndex+1:0;a.setCurrentItemIndex(b)},a.isPagingEnabled=function(){return a.visibleItemsLength?a.products.length>a.visibleItemsLength:!1};var n=!1;a.exitTarget=e.getExitTarget(),b.$on("itemInteraction.update",function(b,c){n=!0,void 0!=c&&(a.exitItemIndex=c),j()}),b.$on("itemInteraction.revert",function(a){n=!1,j()}),b.EXITED="exited",a.exit=function(){a.exitApiRef?g.exit(a.exitApiRef):g.exit(),a.autoCycleStop(),b.$broadcast(b.EXITED)},a.autoCycle=function(b){var c={};c.limit=b&&b.limit?b.limit:null,c.delay=b&&b.delay?b.delay:null,c.onTick=b&&b.onTick?b.onTick:a.setItemNext,c.onFinish=b&&b.onFinish?b.onFinish:function(){a.setCurrentItemIndex(0)},c.interval=b&&b.interval?b.interval:a.getVisibleItems().length,c.onInterval=b&&b.onInterval?b.onInterval:null,c.enableAutoCycleStop=!0,f.autoCycle(c)},a.autoCycleStop=function(){f.autoCycleStop()},a.isPriceEnabled=function(b){var c="true"!=a.headline.showPrice.toLowerCase();return b.price||(c=!1),c},a.allowSalesPrice=function(b){var c=a.getVisibleItems()[b];return f.salesPriceEnabled(c)},a.allowSalesPriceNonRetail=function(b){var c=a.getVisibleItems()[b];return f.salesPriceEnabledNonRetail(c)},a.shadeColor=f.shadeColor,a.renderHtml=function(a){return d.trustAsHtml(a)},b.TEXTFIT_COMPLETE="textfitComplete",b.TEXTFIT_UNIFORMSIZE_ADDED="textfitUniformsizeAdded",b.TEXTFIT_UNIFORMSIZE_COMPLETE="textfitUniformsizeComplete";var o,p={};b.$on(b.TEXTFIT_UNIFORMSIZE_ADDED,function(a,b,c){p[c]||(p[c]={els:[],sizes:[]}),0==b[0].innerText.length&&p[c].els.push(b)}),b.$on(b.TEXTFIT_COMPLETE,function(a,b){if(b.doUniformSize&&(o=setTimeout(function(){l()},2e3),p[b.group].sizes.push(b.scaledFontSize),p[b.group].sizes.length==p[b.group].els.length)){var c=k(p[b.group]);l(c,b)}}),a.resetUniformTextSizes=function(){p={},clearTimeout(o)}}]),layout.controller("CustomCntrl",["$scope","$rootScope","$controller","$timeout","Utils","AnimSequence","VisibleItemsSwitcher","VisibleItemsNavMenu",function(a,b,c,d,e,f,g,h){angular.extend(this,c("LayoutCntrl",{$scope:a})),a.$on("start",function(){f.setDelay(400),f.start(),a.autoCycle({delay:4e3,onInterval:function(){a.isPagingEnabled()&&a.autoScrollVisibleItemsNext()},onFinish:function(){a.isPagingEnabled()&&a.autoScrollVisibleItemsFinish()}})}),b.$on(b.TEXTFIT_COMPLETE,function(a,b){}),b.$on(b.EXITED,function(a,b){}),b.$on(b.TEXTFIT_UNIFORMSIZE_ADDED,function(a,b){}),a.svgPath={chevronLeft:"M 7 12.5 L 18 20.85 18 4.15 7 12.5 Z",chevronRight:"M 7 4.15 L 7 20.85 18 12.5 7 4.15 Z",chevronUp:"M 20.85 18 L 12.5 7 4.15 18 20.85 18 Z",chevronDown:"M 12.5 18 L 20.85 7 4.15 7 12.5 18 Z"},d(function(){for(var b=0,c=a.products.length;c>b;b++)a.products[b].price=e.removeCents(a.products[b].price)}),d(function(){function b(b){var c;return c=b==a.currentFeedItemIndex?0:a.currentFeedItemIndex<b?1:-1}function c(b){g.updateVisibleItemsByIndex(b),a.setVisibleItems(g.getVisibleItems()),d()}function d(){var b=g.getVisibleItemsIndices();a.currentFeedItemIndex=b[a.currentItemIndex]}function e(){f+=a.directionScrollItems,0>f&&(f=i-1),f>i-1&&(f=0)}g.setItemsArray(a.products),g.setVisibleItemsLength(a.visibleItemsLength),c(0),a.directionScrollItems=1,a.setProductIndexNext=function(){var b=a.currentItemIndex<a.getVisibleItems().length-1?a.currentItemIndex+1:-1;-1==b?(a.setVisibleItemsNext(),a.setCurrentItemIndex(0)):a.setItemNext()},a.setProductIndexPrev=function(){var b=a.currentItemIndex>0?a.currentItemIndex-1:-1;-1==b?(a.setVisibleItemsPrevious(),a.setCurrentItemIndex(a.getVisibleItems().length-1)):a.setItemPrevious()},a.setVisibleItemsNext=function(){a.directionScrollItems=1,e(),g.updateVisibleItemsByDirection(1),a.setVisibleItems(g.getVisibleItems()),d()},a.setVisibleItemsPrevious=function(){a.directionScrollItems=-1,e(),g.updateVisibleItemsByDirection(-1),a.setVisibleItems(g.getVisibleItems()),d()},a.setVisibleItemsByIndex=function(d){a.directionScrollItems=b(d),e(),0!=a.directionScrollItems&&c(d)},a.setVisibleItemsByPage=function(b){var c=a.navMenuButtons[b];a.setVisibleItemsByIndex(c.index),f=b},a.autoScrollVisibleItemsNext=function(){var b=g.getVisibleItemsIndexByDirection(1);a.setVisibleItemsByIndex(b)},a.autoScrollVisibleItemsFinish=function(){a.navMenuButtons?a.setVisibleItemsByPage(0):a.setVisibleItemsByIndex(0),a.setCurrentItemIndex(0)};var f=0,i=Math.ceil(a.products.length/a.visibleItemsLength);a.isCurrentItemsPage=function(a){return f==a?!0:!1},h.setNavMenuButtons(a.visibleItemsLength,a.products.length),a.navMenuButtons=h.navMenuButtons})}]),layout.service("AnimationScrollPosition",function(){function a(a){var b=a.parent()[0];return{left:-b.offsetWidth,right:b.offsetWidth,top:-b.offsetHeight,bottom:b.offsetHeight}}this.getStartPosition=function(b,c){var d,d=a(b),e=b.scope().directionScrollItems;switch(c){case"x":d=0>e?d.left:d.right;break;case"y":d=0>e?d.bottom:d.top}return d},this.getEndPosition=function(b,c){var d,d=a(b),e=b.scope().directionScrollItems;switch(c){case"x":d=0>e?d.right:d.left;break;case"y":d=0>e?d.top:d.bottom}return d}}),layout.animation(".anim-transition-x",["AnimationScrollPosition",function(a){var b=Power2.easeInOut,c={"in":.6,out:.6,delay:.1},d="x";return{enter:function(e,f){return TweenLite.set(e,{opacity:0,left:a.getStartPosition(e,d)}),TweenLite.to(e,c["in"],{opacity:1,left:0,ease:b,delay:c.delay,onComplete:f}),function(a){a&&TweenLite.set(e,{opacity:1})}},leave:function(e,f){return TweenLite.set(e,{opacity:1,left:0}),TweenLite.to(e,c.out,{opacity:0,left:a.getEndPosition(e,d),ease:b,delay:c.delay,onComplete:f}),function(a){a&&TweenLite.set(e,{opacity:0})}}}}]).animation(".anim-transition-y",["AnimationScrollPosition",function(a){var b=Power2.easeInOut,c={"in":.6,out:.6,delay:.3},d="y";return{enter:function(e,f){return TweenLite.set(e,{opacity:0,top:a.getStartPosition(e,d)}),TweenLite.to(e,c["in"],{opacity:1,top:0,ease:b,delay:c.delay,onComplete:f}),function(a){a&&TweenLite.set(e,{opacity:1})}},leave:function(e,f){return TweenLite.set(e,{opacity:1,top:0}),TweenLite.to(e,c.out,{opacity:0,top:a.getEndPosition(e,d),ease:b,delay:c.delay,onComplete:f}),function(a){a&&TweenLite.set(e,{opacity:0})}}}}]),layout.animation(".anim-fade",[function(){var a=Power2.easeInOut,b={"in":.4,out:.4,delay:.4};return{enter:function(c,d){return TweenLite.set(c,{opacity:0}),TweenLite.to(c,b["in"],{opacity:1,ease:a,delay:b.delay,onComplete:d}),function(a){a&&TweenLite.set(c,{opacity:1})}},leave:function(c,d){return TweenLite.set(c,{opacity:1}),TweenLite.to(c,b.out,{opacity:0,ease:a}),TweenLite.delayedCall(b.delay,d),function(a){a&&TweenLite.set(c,{opacity:0})}}}}]),layout.directive("animSequence",["AnimSequence","$rootScope",function(a,b){return{restrict:"AE",link:function(c,d,e){function f(){switch(j){case l.fadeOn:TweenLite.set(d,{opacity:0});break;case l.fadeOff:break;case l.slideUp:break;case l.slideDown:break;case l.slideLeft:break;case l.slideRight:}}function g(){switch(j){case l.fadeOn:TweenLite.to(d,k,{opacity:1});break;case l.fadeOff:break;case l.slideUp:break;case l.slideDown:break;case l.slideLeft:break;case l.slideRight:}}var h=e.animFinal&&c.$eval(e.animFinal)===!0?!0:!1,i=c.$eval(e.animStep),j=e.animType,k=c.$eval(e.animDur)||.5,l={fadeOn:"fade-on",fadeOff:"fade-off",slideUp:"slide-up",slideDown:"slide-down",slideLeft:"slide-left",slideRight:"slide-right"};f(),c.$on("AnimSequence.update",function(b,c){c===i&&(g(),h===!0&&a.finish())}),b.$on("AnimSequence.finish",function(){a.finish()})}}}]),layout.directive("animSequenceAdvanced",["$rootScope","AnimSequence",function(a,b){return{restrict:"AE",scope:{configs:"=animSequenceAdvanced"},link:function(b,c,d){function e(){var a=g();switch(a){case j.fadeOn:TweenLite.set(c,{opacity:0});break;case j.fadeOff:break;case j.slideUp:break;case j.slideDown:break;case j.slideLeft:break;case j.slideRight:}}function f(a){var b=(c[0].className.substring(0,c[0].className.indexOf(" ")),a.type),d=a.amount||10,e=a.dur||.5,f=Power2.easeOut,g={};switch(b){case j.fadeOn:g={opacity:1};break;case j.fadeOff:g={opacity:0};break;case j.slideUp:g={top:-d,ease:f};break;case j.slideDown:g={top:d,ease:f};break;case j.slideLeft:g={left:-d,ease:f};break;case j.slideRight:g={left:d,ease:f}}TweenLite.to(c,e,g)}function g(){for(var a=null,b=0,c=i.length;c>b;b++)(!a||i[b].step<a)&&(a=i[b].step,type=i[b].type);return type}function h(a){for(var b=0,c=i.length;c>b;b++)if(i[b].step===a)return i[b];return null}var i=b.configs,j={fadeOn:"fade-on",fadeOff:"fade-off",slideUp:"slide-up",slideDown:"slide-down",slideLeft:"slide-left",slideRight:"slide-right"};e(),a.$on("AnimSequence.update",function(a,b){var c=h(b);c&&f(c)})}}}]),layout.directive("iconSvg",function(){return{restrict:"AE",replace:!0,scope:{path:"=",size:"="},link:function(a,b,c){var d=a.size||8,e=a.path,f=c["class"]||"arrow-icon-svg";if(!e)throw new Error("No SVG path used on icon-svg directive.");var g=function(){return['<svg class="'+f+'"','width="'+d+'px" height="'+d+'px"','viewBox="0 0 '+d+" "+d+'"','enable-background="new 0 0 '+d+" "+d+'"','version="1.1" x="0px" y="0px"','xmlns="http://www.w3.org/2000/svg"','xmlns:xlink="http://www.w3.org/1999/xlink"','xml:space="preserve">','<path d="'+e+'"/>',"</svg>"].join("")};b.replaceWith(g())}}});