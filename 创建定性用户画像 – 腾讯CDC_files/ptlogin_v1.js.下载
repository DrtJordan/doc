var pt=function(){var e={},n={},t="",o=null,r=625,i=400,a="",c="",l=null,d={_counter:0,_uid:function(){return"h"+d._counter++},add:function(e,n,t){if(document.addEventListener)e.addEventListener(n,t,!1);else if(document.attachEvent){if(-1!=d._find(e,n,t))return;var o=function(n){n||(n=window.event);var o={_event:n,type:n.type,target:n.srcElement,currentTarget:e,relatedTarget:n.fromElement?n.fromElement:n.toElement,eventPhase:n.srcElement==e?2:3,clientX:n.clientX,clientY:n.clientY,screenX:n.screenX,screenY:n.screenY,altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,keyCode:n.keyCode,origin:n.origin,data:n.data,stopPropagation:function(){this._event.cancelBubble=!0},preventDefault:function(){this._event.returnValue=!1}};Function.prototype.call?t.call(e,o):(e._currentHandler=t,e._currentHandler(o),e._currentHandler=null)};e.attachEvent("on"+n,o);var r={element:e,eventType:n,handler:t,wrappedHandler:o},i=e.document||e,a=i.parentWindow,c=d._uid();a._allHandlers||(a._allHandlers={}),a._allHandlers[c]=r,e._handlers||(e._handlers=[]),e._handlers.push(c),a._onunloadHandlerRegistered||(a._onunloadHandlerRegistered=!0,a.attachEvent("onunload",d._removeAllHandlers))}},remove:function(e,n,t){if(document.addEventListener)e.removeEventListener(n,t,!1);else if(document.attachEvent){var o=d._find(e,n,t);if(-1==o)return;var r=e.document||e,i=r.parentWindow,a=e._handlers[o],c=i._allHandlers[a];e.detachEvent("on"+n,c.wrappedHandler),e._handlers.splice(o,1),delete i._allHandlers[a]}},_find:function(e,n,t){var o=e._handlers;if(!o)return-1;for(var r=e.document||e,i=r.parentWindow,a=o.length-1;a>=0;a--){var c=o[a],l=i._allHandlers[c];if(l.eventType==n&&l.handler==t)return a}return-1},_removeAllHandlers:function(){var e=this;for(id in e._allHandlers){var n=e._allHandlers[id];n.element.detachEvent("on"+n.eventType,n.wrappedHandler),delete e._allHandlers[id]}},src:function(e){return e?e.target:event.srcElement},stopPropagation:function(e){e?e.stopPropagation():event.cancelBubble=!0}},s=function(e){var n,t=function(e){if(!e)return e;for(;e!=unescape(e);)e=unescape(e);for(var n=["<",">","'",'"',"%3c","%3e","%27","%22","%253c","%253e","%2527","%2522"],t=["&#x3c;","&#x3e;","&#x27;","&#x22;","%26%23x3c%3B","%26%23x3e%3B","%26%23x27%3B","%26%23x22%3B","%2526%2523x3c%253B","%2526%2523x3e%253B","%2526%2523x27%253B","%2526%2523x22%253B"],o=0;o<n.length;o++)e=e.replace(new RegExp(n[o],"gi"),t[o]);return e};return t((n=document.cookie.match(RegExp("(^|;\\s*)"+e+"=([^;]*)(;|$)")))?unescape(n[2]):"")},u=function(e,n,t){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(t?t:"/")+"; "+(n?"domain="+n+";":"")},p=function(e){var n=new Image;n.src=e},f=function(e,n){if(!(Math.random()>(n||1))){var t=location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id="+e+"&v="+Math.random();p(t)}},m=function(n,t){e[n]=t},h=function(n){e=n},v=function(e,t){n[e]=t},_=function(){var n=e.protocol||"http:";n+="//";var o=e.domain||"qq.com";"https:"==e.protocol&&"qq.com"!=o&&"tenpay.com"!=o&&(n="https://ssl."),t=n+"xui.ptlogin2."+o,c=t;var r=t+"/cgi-bin/xlogin?",i="";for(var a in e)"protocol"!=a&&"domain"!=a&&(i+=a+"="+encodeURIComponent(e[a])+"&");return r+=i},g=function(n,t){if(t)o=t;else{o=document.createElement("div"),document.body.appendChild(o);var r="left:50%;";r+="top:50%;",r+="position:fixed;",r+="z-index:9999;",r+="background:none;",r+="_position:absolute;",r+="_top:expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight-this.offsetHeight)/2));",r+="_margin-top:0px;",o.style.cssText=r}o.innerHTML='<iframe name="ui_ptlogin" id="ui_ptlogin" allowtransparency="true" scrolling="no" frameborder="0" width="100%" height="100%" style="top:0; left:0;'+(1==e.border_radius?"border-radius:5px;":"")+'" src="'+n+'">'},y=function(e){var n=_();a?document.getElementById("ui_ptlogin").src=n:(g(n,e),-[1]||window.XMLHttpRequest||k(r-1,i-1)),a=n,x(),o.style.display="block"},w=function(){o.style.display="none",E()},x=function(){var n=e.maskOpacity;if(0!=n){if(!l){var t="background-color:#000;overflow:hidden;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9998;opacity:"+n/100+";filter:alpha(opacity="+n+");";t+="_position:absolute;_height:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight));_width:expression(eval(document.documentElement.scrollLeft+document.documentElement.clientWidth));",l=document.createElement("div"),l.style.cssText=t,document.body.appendChild(l)}l.style.display="block"}},E=function(){l&&(l.style.display="none")},k=function(e,t){var a=o;a&&e>1&&t>1&&(r!=e||i!=t)&&("function"==typeof n.resize?n.resize(parseInt(e),parseInt(t)):(a.style.width=e+"px",a.style.height=t+"px",a.style.marginLeft=-e/2+"px",a.style.marginTop=-t/2+"px")),r=e,i=t},H=function(){w(),"function"==typeof n.close&&n.close()},b=function(e){var n={};if("undefined"!=typeof JSON)n=JSON.parse(e);else{var t=/^[\],:{}\s]*$/,o=/(?:^|:|,)(?:\s*\[)+/g,r=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,i=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;t.test(e.replace(r,"@").replace(i,"]").replace(o,""))&&(n=new Function("return "+e)())}return n},T=function(){"undefined"!=typeof window.postMessage?d.add(window,"message",function(e){var n=e.origin;if(n==c){var t=b(e.data);switch(t.action){case"close":H();break;case"resize":k(t.width,t.height)}}}):navigator.ptlogin_callback=function(e){var n=b(e);switch(n.action){case"close":H();break;case"resize":k(n.width,n.height)}}},q=function(){T(),window.setTimeout(function(){f(447926,1)},1e3)},B="",z="",C=function(){z=location.hostname.match(/\w*\.(cc|com|cn|com\.cn)$/),z=z?z[0]:"",B=location.hostname.match(/\w+(\.\w+)\.(cc|com|cn|com\.cn)$/),B=B?B[0]:"","qq.com"!=z&&(B=z)},L=function(e){var n=s("pt4_token"),t=s("skey"),o=P(t),r=s("ptcz"),i=P(r),a=e?"qq.com":z,c=("https:"==location.protocol?"https://ssl.":"http://")+"ptlogin2."+a+"/logout?";return c+="pt4_token="+n+"&pt4_hkey="+o+"&pt4_ptcz="+i+"&deep_logout=1"},P=function(e){for(var n=0,t=0,o=e.length;o>t;++t)n+=(n<<5)+e.charCodeAt(t);return 2147483647&n},M=function(){u("uin",z),u("skey",z),u("p_uin",B),u("p_skey",B),u("p_luin",B),u("p_lskey",B),u("pt4_token",B),u("pt_mbkey",z),""!=B&&""!=s("skey_m")&&(u("uin_m",B),u("skey_m",B))},K=function(e,n){C();var t=s("pt4_token"),o=s("skey"),r=s("ptcz"),i=L(n);(t||o||r)&&p(i),window.setTimeout(function(){M(),e&&e(2)},100)},R=function(e){K(e,!0)};return q(),{showPtui:y,hidePtui:w,setParam:m,setParams:h,setCallback:v,logout:K,logoutQQCom:R}}();